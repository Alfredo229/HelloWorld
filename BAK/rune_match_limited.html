<html>

<meta charset="utf-8">

<head>
<title>Rune Coincidence Limited</title>
<script src="RuneFunctions.js"></script>
<script src="random.js"></script>
</head>

<body>

<div id="container" style="margin:auto">
<table align="center" width=100% border=0><td align="center">

<h1>Rune Coincidence Limited</h1>

<p>This one will pull 3 coincidences and stop after that.</p>

</table>

<table align="center"><form><tr>

<td><input type="button" value="Ready" onClick="initA()"></td>
<td><input type="button" value="Stop" onClick="stop_run()"></td>
<td><input type="button" value="Clear" onClick="clearIt()"></td>

</tr><tr>

</tr>
</form></table>

<div style="width:350px;float:left">
<table align="center" cellSpacing=2>

<tr>

<td width=100>
<img src="Runes/blank.jpg" width=100 height=100 id="image0"">
</td>

<td width=100>
<img src="Runes/blank.jpg" width=100 height=100 id="image1"">
</td>

<td width=100>
<img src="Runes/blank.jpg" width=100 height=100 id="image2"">
</td>

</tr><tr>

<td>
<p id="text0"></p>
</td>

<td>
<p id="text1"></p>
</td>

<td>
<p id="text2"></p>
</td>

</tr></table></div>


<div style="float:left;width:50%">
<p id="defenition0"></p>
<p id="defenition1"></p>
<p id="defenition2"></p>
</div>


</body>

<script type="text/javascript">

//***********VARIABLES******************

path = new Array("01","02","03","04","05","06","07","08","09","10",
"11","12","13","14","15","16","17","18","19","20","21","22","23","24");

var rune = new Array();
for(i=0 ; i < 24 ; i++){
 rune[i] = new Image();
 rune[i].src = "Runes/"+path[i]+".jpg";
}

var cycleA = 20;
var cycleB = 50;
var cycleC = 120;

var ID1 = 0;
var ID2 = 0;
var ID3 = 0;

var running = 0;

optionChecked = false;

var Current_Rune = new Array(3);
my_index = 0;
max_buffered = 3;

pull = 0;

defenitionBuffer = new Array(99,99,99);

value1 = 0;
value2 = 0;
value3 = 0;


//****************************FUNCTIONS***********************************

function initA(){
 if(running == 0){
  clearIt();
  running = 1;
  change1();
  change2();
  change3();
 }
}

function bufferMore(){
 if(max_buffered < 12){
  document.getElementById("image"+max_buffered).style.visibility="visible";
  document.getElementById("text"+max_buffered).style.visibility="visible";
  max_buffered++;
 }
}

function bufferLess(){
 if(max_buffered > 1){
  max_buffered--;
  document.getElementById("image"+max_buffered).style.visibility="hidden";
  document.getElementById("text"+max_buffered).style.visibility="hidden";
 }
}

function clearIt(){
 stop_run();
 for(i = 0; i < max_buffered; i++){
  document.getElementById("image"+i).src = "Runes/blank.jpg";
  document.getElementById("text"+i).innerHTML="";
  document.getElementById("defenition"+i).innerHTML="";
 }
 for(i=0; i<24; i++)
  Current_Rune[i]=0;
 my_index = 0;
}

function stop_run(){
 window.clearTimeout(ID1);
 window.clearTimeout(ID2);
 window.clearTimeout(ID3);
 running = 0;
}

function change1(){
 ID1=setTimeout("change1();",cycleA);
 value1 = pickRune();
 validate();
}

function change2(){
 ID2=setTimeout("change2();",cycleB);
 value2 = pickRune();
 validate();
}

function change3(){
 ID3 = setTimeout("change3()",cycleC);
 value3 = pickRune();
 validate();
}

function pickRune(){
 pointer = Random(23-my_index);
 for(i=0; i <= pointer; i++){
  if(Current_Rune[i] == 1){
   pointer++;
//   document.getElementById("defenition"+i).innerHTML = 'bump';
 }}
// document.getElementById("defenition0").innerHTML = my_index;
 return(pointer);
}

function validate(){
 if((value1 == value2) && (value1 == value3)){
  pull = value1;
  printOutput(pull);
  move_index(pull);
}}

function move_index(match){
 Current_Rune[match] = 1;
 my_index++;
 if(my_index >= max_buffered)
  stop_run();
}

function printOutput(myMatch){
 document.getElementById("image"+my_index).src = rune[myMatch].src;
 document.getElementById("text"+my_index).innerHTML=name2[myMatch];
 document.getElementById('defenition'+my_index).innerHTML = line[myMatch]
}

function addDescription(myRune){
 for(i=2; i>0; i--){
  defenitionBuffer[i]=defenitionBuffer[i-1];
 }
 defenitionBuffer[0]=Current_Rune[myRune];
 for(i=0; i<3; i++){
  if(defenitionBuffer[i] != 99)
   document.getElementById("defenition"+(i+1)).innerHTML = line[defenitionBuffer[i]];
}}

</script>
</html>